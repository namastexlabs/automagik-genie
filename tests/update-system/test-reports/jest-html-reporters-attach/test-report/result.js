window.jest_html_reporters_callback__({"numFailedTestSuites":1,"numFailedTests":3,"numPassedTestSuites":0,"numPassedTests":6,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":1,"numTotalTests":9,"startTime":1754068427328,"success":false,"testResults":[{"numFailingTests":3,"numPassingTests":6,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1754068432220,"runtime":4856,"slow":false,"start":1754068427364},"testFilePath":"/home/cezar/automagik/automagik-genie/tests/update-system/safety/data-integrity.test.js","failureMessage":"  ‚óè üõ°Ô∏è CRITICAL: Data Integrity Validation ‚Ä∫ Complete Data Recovery ‚Ä∫ CRITICAL: Perfect restoration from backup preserves all data\n\n    Backup backup-2025-08-01T17-13-47-850Z is invalid or corrupted\n\n      161 |     // Validate backup before restoration\n      162 |     if (!await this.validateBackup(backupId)) {\n    > 163 |       throw new Error(`Backup ${backupId} is invalid or corrupted`);\n          |             ^\n      164 |     }\n      165 |\n      166 |     const manifest = JSON.parse(await fs.readFile(manifestPath, 'utf-8'));\n\n      at BackupManager.restoreFromBackup (../../lib/update/backup.js:163:13)\n      at Object.<anonymous> (safety/data-integrity.test.js:217:29)\n\n  ‚óè üõ°Ô∏è CRITICAL: Data Integrity Validation ‚Ä∫ Complete Data Recovery ‚Ä∫ CRITICAL: User customizations survive complete update cycle\n\n    Backup backup-2025-08-01T17-13-47-879Z is invalid or corrupted\n\n      161 |     // Validate backup before restoration\n      162 |     if (!await this.validateBackup(backupId)) {\n    > 163 |       throw new Error(`Backup ${backupId} is invalid or corrupted`);\n          |             ^\n      164 |     }\n      165 |\n      166 |     const manifest = JSON.parse(await fs.readFile(manifestPath, 'utf-8'));\n\n      at BackupManager.restoreFromBackup (../../lib/update/backup.js:163:13)\n      at Object.<anonymous> (safety/data-integrity.test.js:312:29)\n\n  ‚óè üõ°Ô∏è CRITICAL: Data Integrity Validation ‚Ä∫ Atomic Operation Guarantees ‚Ä∫ CRITICAL: All-or-nothing update guarantee\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      377 |       }\n      378 |       \n    > 379 |       expect(updateFailed).toBe(true);\n          |                            ^\n      380 |       console.log('üí• UPDATE INTENTIONALLY FAILED FOR ATOMIC TEST');\n      381 |       \n      382 |       // CRITICAL: Verify NO files were modified despite partial processing\n\n      at Object.toBe (safety/data-integrity.test.js:379:28)\n","testResults":[{"ancestorTitles":["üõ°Ô∏è CRITICAL: Data Integrity Validation","Backup Data Preservation"],"duration":49,"failureMessages":[],"fullName":"üõ°Ô∏è CRITICAL: Data Integrity Validation Backup Data Preservation CRITICAL: Complete file backup with exact content preservation","status":"passed","title":"CRITICAL: Complete file backup with exact content preservation"},{"ancestorTitles":["üõ°Ô∏è CRITICAL: Data Integrity Validation","Backup Data Preservation"],"duration":12,"failureMessages":[],"fullName":"üõ°Ô∏è CRITICAL: Data Integrity Validation Backup Data Preservation CRITICAL: User customizations are preserved in backup","status":"passed","title":"CRITICAL: User customizations are preserved in backup"},{"ancestorTitles":["üõ°Ô∏è CRITICAL: Data Integrity Validation","Backup Data Preservation"],"duration":17,"failureMessages":[],"fullName":"üõ°Ô∏è CRITICAL: Data Integrity Validation Backup Data Preservation CRITICAL: Backup survives system failures during creation","status":"passed","title":"CRITICAL: Backup survives system failures during creation"},{"ancestorTitles":["üõ°Ô∏è CRITICAL: Data Integrity Validation","Complete Data Recovery"],"duration":18,"failureMessages":["Error: Backup backup-2025-08-01T17-13-47-850Z is invalid or corrupted\n    at BackupManager.restoreFromBackup (/home/cezar/automagik/automagik-genie/lib/update/backup.js:163:13)\n    at Object.<anonymous> (/home/cezar/automagik/automagik-genie/tests/update-system/safety/data-integrity.test.js:217:29)"],"fullName":"üõ°Ô∏è CRITICAL: Data Integrity Validation Complete Data Recovery CRITICAL: Perfect restoration from backup preserves all data","status":"failed","title":"CRITICAL: Perfect restoration from backup preserves all data"},{"ancestorTitles":["üõ°Ô∏è CRITICAL: Data Integrity Validation","Complete Data Recovery"],"duration":13,"failureMessages":["Error: Backup backup-2025-08-01T17-13-47-879Z is invalid or corrupted\n    at BackupManager.restoreFromBackup (/home/cezar/automagik/automagik-genie/lib/update/backup.js:163:13)\n    at Object.<anonymous> (/home/cezar/automagik/automagik-genie/tests/update-system/safety/data-integrity.test.js:312:29)"],"fullName":"üõ°Ô∏è CRITICAL: Data Integrity Validation Complete Data Recovery CRITICAL: User customizations survive complete update cycle","status":"failed","title":"CRITICAL: User customizations survive complete update cycle"},{"ancestorTitles":["üõ°Ô∏è CRITICAL: Data Integrity Validation","Atomic Operation Guarantees"],"duration":4287,"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: false\n    at Object.toBe (/home/cezar/automagik/automagik-genie/tests/update-system/safety/data-integrity.test.js:379:28)"],"fullName":"üõ°Ô∏è CRITICAL: Data Integrity Validation Atomic Operation Guarantees CRITICAL: All-or-nothing update guarantee","status":"failed","title":"CRITICAL: All-or-nothing update guarantee"},{"ancestorTitles":["üõ°Ô∏è CRITICAL: Data Integrity Validation","Atomic Operation Guarantees"],"duration":19,"failureMessages":[],"fullName":"üõ°Ô∏è CRITICAL: Data Integrity Validation Atomic Operation Guarantees CRITICAL: Staging area prevents data corruption","status":"passed","title":"CRITICAL: Staging area prevents data corruption"},{"ancestorTitles":["üõ°Ô∏è CRITICAL: Data Integrity Validation","Edge Case Data Protection"],"duration":8,"failureMessages":[],"fullName":"üõ°Ô∏è CRITICAL: Data Integrity Validation Edge Case Data Protection CRITICAL: Data preservation with insufficient disk space","status":"passed","title":"CRITICAL: Data preservation with insufficient disk space"},{"ancestorTitles":["üõ°Ô∏è CRITICAL: Data Integrity Validation","Edge Case Data Protection"],"duration":9,"failureMessages":[],"fullName":"üõ°Ô∏è CRITICAL: Data Integrity Validation Edge Case Data Protection CRITICAL: Data preservation with permission denied","status":"passed","title":"CRITICAL: Data preservation with permission denied"}]}],"config":{"bail":0,"changedFilesWithAncestor":false,"ci":false,"collectCoverage":false,"collectCoverageFrom":["../../lib/update/**/*.js","../../bin/update.js","!**/node_modules/**","!**/fixtures/**","!**/helpers/**"],"coverageDirectory":"/home/cezar/automagik/automagik-genie/tests/update-system/coverage","coverageProvider":"babel","coverageReporters":["text","html","lcov","json-summary"],"coverageThreshold":{"global":{"branches":95,"functions":95,"lines":95,"statements":95},"../../lib/update/backup.js":{"branches":100,"functions":100,"lines":100,"statements":100},"../../lib/update/engine.js":{"branches":98,"functions":98,"lines":98,"statements":98}},"detectLeaks":false,"detectOpenHandles":false,"errorOnDeprecated":true,"expand":false,"findRelatedTests":false,"forceExit":true,"json":false,"lastCommit":false,"listTests":false,"logHeapUsage":false,"maxConcurrency":5,"maxWorkers":31,"noStackTrace":false,"nonFlagArgs":[],"notify":false,"notifyMode":"failure-change","onlyChanged":false,"onlyFailures":false,"openHandlesTimeout":1000,"passWithNoTests":false,"projects":[],"reporters":[["default",{}],["/home/cezar/automagik/automagik-genie/tests/update-system/node_modules/jest-html-reporters/index.js",{"publicPath":"./test-reports","filename":"test-report.html","expand":true}]],"rootDir":"/home/cezar/automagik/automagik-genie/tests/update-system","runTestsByPath":false,"seed":-303762600,"skipFilter":false,"snapshotFormat":{"escapeString":false,"printBasicPrototype":false},"testFailureExitCode":1,"testPathPattern":"safety/data-integrity","testSequencer":"/home/cezar/automagik/automagik-genie/tests/update-system/node_modules/@jest/test-sequencer/build/index.js","testTimeout":30000,"updateSnapshot":"new","useStderr":false,"verbose":true,"watch":false,"watchAll":false,"watchman":true,"workerThreads":false},"endTime":1754068432223,"_reporterOptions":{"publicPath":"./test-reports","filename":"test-report.html","expand":true,"pageTitle":"","hideIcon":false,"testCommand":"","openReport":false,"failureMessageOnly":0,"enableMergeData":false,"dataMergeLevel":1,"inlineSource":false,"urlForTestFiles":"","darkTheme":false,"includeConsoleLog":false,"stripSkippedTest":false},"logInfoMapping":{},"attachInfos":{}})