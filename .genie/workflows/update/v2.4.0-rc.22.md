**Last Updated:** !`date -u +"%Y-%m-%d %H:%M:%S UTC"`

---
from: v2.4.0-rc.21
to: v2.4.0-rc.22
date: 2025-10-18
llm: haiku
description: Move install.md to workflows, establish update workflow system
---

# Update: v2.4.0-rc.21 → v2.4.0-rc.22

## Changes Summary

**Install/Update Workflow System:**
- Moved install.md from `code/neurons/` to `workflows/install/`
- Created update workflow structure for sequential migrations
- Established version-stamped update trace system

**Rationale:**
- Install is a workflow orchestrator, not a neuron (architectural clarity)
- Update traces enable users 10+ versions behind to migrate sequentially
- No more static templates - install workflows adapt .genie/ to target repos
- Each update creates commit with full audit trail

---

## Migration Steps

### 1. Restructure Install Workflow
```bash
# Create workflow directories
mkdir -p .genie/workflows/install
mkdir -p .genie/workflows/update

# Move install.md (if exists in old location)
if [ -f .genie/agents/code/neurons/install.md ]; then
  mv .genie/agents/code/neurons/install.md .genie/workflows/install/install.md
fi

# Create update README
cat > .genie/workflows/update/README.md << 'EOF'
# Update Workflows

Sequential update migrations for Genie framework.

**How it works:**
- Each file migrates from one version to the next
- Updates run sequentially (e.g., rc.11 → rc.12 → rc.13 → ... → rc.21)
- Each update creates a commit with full audit trail
- Haiku LLM executes migration steps

**Naming convention:**
- `v2.4.0-rc.22.md` - Migrates from rc.21 to rc.22
- `v2.5.0.md` - Migrates from 2.4.0 to 2.5.0

**Usage:**
\`\`\`bash
npx automagik-genie update
\`\`\`

CLI detects current version and runs all missing updates in sequence.
EOF
```

### 2. Update Version References
```bash
# Update package.json
npm version 2.4.0-rc.22 --no-git-tag-version

# STATE.md auto-updates via !`node -p "require('./package.json').version"`
```

### 3. Update @ References (if any exist)
```bash
# Search and replace any references to old install.md path
find .genie -type f -name "*.md" -not -path "*.git*" -not -path "*logs*" \
  -exec sed -i 's|code/neurons/install\.md|workflows/install/install.md|g' {} \;
```

---

## Validation

```bash
# Structure check
test -f .genie/workflows/install/install.md || echo "❌ FAIL: install.md not found"
test -f .genie/workflows/update/README.md || echo "❌ FAIL: update README not found"
test ! -f .genie/agents/code/neurons/install.md || echo "❌ FAIL: old install.md still exists"

# Directory structure
test -d .genie/workflows/install || echo "❌ FAIL: install directory missing"
test -d .genie/workflows/update || echo "❌ FAIL: update directory missing"

# Version check
node -p "require('./package.json').version" | grep "2.4.0-rc.22" || echo "❌ FAIL: version not updated"

echo "✅ All validation checks passed"
```

---

## Rollback (if needed)

```bash
# Undo this update commit
git reset --hard HEAD~1

# Or manual rollback:
mv .genie/workflows/install/install.md .genie/agents/code/neurons/install.md
rm -rf .genie/workflows/update
npm version 2.4.0-rc.21 --no-git-tag-version
```

---

## Notes

**Breaking Changes:**
- None - install.md moved but functionality unchanged

**New Capabilities:**
- Update workflow system enables sequential version migrations
- Users can jump from any old version to latest automatically
- Each update creates audit trail commit

**Future Updates:**
- Each RC/release creates new update file (v2.4.0-rc.23.md, etc.)
- Users 10 versions behind: CLI runs 10 updates sequentially
- No manual template maintenance needed - update traces contain full migration logic
